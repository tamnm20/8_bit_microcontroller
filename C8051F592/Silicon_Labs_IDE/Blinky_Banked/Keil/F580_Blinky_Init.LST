C51 COMPILER V9.60.7.0   F580_BLINKY_INIT                                                  07/16/2024 14:58:31 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE F580_BLINKY_INIT
OBJECT MODULE PLACED IN F580_Blinky_Init.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe F580_Blinky_Init.c DB OE BR INCDIR(C:\SiLabs\MCU\Inc)

line level    source

   1          //-----------------------------------------------------------------------------
   2          // F580_Blinky_Init.c
   3          //-----------------------------------------------------------------------------
   4          // Copyright (C) 2008 Silicon Laboratories, Inc.
   5          // http://www.silabs.com
   6          
   7          // How To Test:
   8          // 
   9          // See F580_Blinky_Main.c
  10          //
  11          // Target:         C8051F580 (Side A of a C8051F580-TB)
  12          // Tool chain:     Keil C51 8.0 / Keil EVAL C51
  13          // Command Line:   None
  14          //
  15          // Release 1.0 / 12 SEP 2008 (GP)
  16          //    -Initial Revision
  17          
  18          //-----------------------------------------------------------------------------
  19          // Includes
  20          //-----------------------------------------------------------------------------
  21          
  22          #include <compiler_defs.h>             // Compiler declarations
  23          #include <C8051F580_defs.h>            // SFR declarations
  24          #include "F580_Blinky_Init.h>
  25          
  26          //-----------------------------------------------------------------------------
  27          // OSCILLATOR_Init
  28          //-----------------------------------------------------------------------------
  29          //
  30          // Return Value:  None
  31          // Parameters:    None
  32          //
  33          // Configure the internal oscillator to maximum internal frequency / 8
  34          //
  35          //-----------------------------------------------------------------------------
  36          void OSCILLATOR_Init (void)
  37          {
  38   1         U8 SFRPAGE_save = SFRPAGE;
  39   1         SFRPAGE = CONFIG_PAGE;
  40   1      
  41   1         OSCICN = 0x87;
  42   1      
  43   1         SFRPAGE = SFRPAGE_save;
  44   1      }
  45          
  46          
  47          //-----------------------------------------------------------------------------
  48          // PORT_Init
  49          //-----------------------------------------------------------------------------
  50          //
  51          // Return Value:  None
  52          // Parameters:    None
  53          //
  54          // Configure the Crossbar and GPIO ports.
  55          //
C51 COMPILER V9.60.7.0   F580_BLINKY_INIT                                                  07/16/2024 14:58:31 PAGE 2   

  56          // P1.3 - digital  push-pull   LED
  57          //
  58          //-----------------------------------------------------------------------------
  59          void PORT_Init (void)
  60          {
  61   1         U8 SFRPAGE_save = SFRPAGE;
  62   1         SFRPAGE = CONFIG_PAGE;
  63   1      
  64   1         P1MDOUT |= 0x08;                    // Enable LED as a push-pull output
  65   1         P1SKIP  |= 0x08;                    // Skip the LED pin on the crossbar
  66   1      
  67   1         P2MDOUT |= 0x07;                    
  68   1         P2SKIP  |= 0x07;                   
  69   1      
  70   1      
  71   1         XBR2     = 0x40;                    // Enable crossbar and weak pull-ups
  72   1      
  73   1         SFRPAGE = SFRPAGE_save;
  74   1      }
  75          
  76          //-----------------------------------------------------------------------------
  77          // TIMER2_Init
  78          //-----------------------------------------------------------------------------
  79          //
  80          // Return Value:  None
  81          // Parameters:    U16 counts - number of system clock cycles between interrupts
  82          //                             range is 0 to 65535
  83          //
  84          // Configure Timer2 to 16-bit auto-reload and generate an interrupt at
  85          // interval specified by <counts> using SYSCLK/12 as its time base.
  86          //
  87          //-----------------------------------------------------------------------------
  88          
  89          void TIMER2_Init (U16 counts)
  90          {
  91   1         U8 SFRPAGE_save = SFRPAGE;
  92   1         SFRPAGE = ACTIVE_PAGE;
  93   1      
  94   1         TMR2CN  = 0x00;                     // Stop Timer2; Clear TF2;
  95   1                                             // use SYSCLK/12 as timebase
  96   1         CKCON  &= ~0x60;                    // Timer2 clocked based on T2XCLK;
  97   1      
  98   1         TMR2RL  = -counts;                  // Init reload values
  99   1         TMR2    = 0xFFFF;                   // Set to reload immediately
 100   1         ET2     = 1;                        // Enable Timer2 interrupts
 101   1         TR2     = 1;                        // Start Timer2
 102   1      
 103   1         SFRPAGE = SFRPAGE_save;
 104   1      }
 105          
 106          //-----------------------------------------------------------------------------
 107          // End Of File
 108          //-----------------------------------------------------------------------------


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     66    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.60.7.0   F580_BLINKY_INIT                                                  07/16/2024 14:58:31 PAGE 3   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
